#!/usr/bin/env python3
from waggle.plugin import Plugin
import time


plugin = Plugin()

while True:
    plugin.add_measurement({
        'sensor_id': 1,
        'parameter_id': 1,
        'value': b'some data',
    })

    plugin.add_measurement({
        'sensor_id': 1,
        'parameter_id': 2,
        'value': b'some more data',
    })

    plugin.add_measurement({
        'sensor_id': 2,
        'parameter_id': 1,
        'value': b'even more data',
    })

    # also supports prepacked sensorgram data bytes
    prepacked_data = pull_particle_sensorgrams()
    plugin.add_measurement(prepacked_data)

    plugin.publish_measurements()

    time.sleep(1)
